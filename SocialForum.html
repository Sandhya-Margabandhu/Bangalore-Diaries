<!DOCTYPE html>
<html lang="en" >
<head>
<meta charset="UTF-8">
<title>SocialConnect Forum</title>
<link rel='stylesheet' href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
  <link rel="icon" href="images/logo.png">

<!-- <<<<<< CSS STARTS HERE >>>>>> -->

<style>
body {
  padding-top: 70px;
  background-color:white;
}
hr {
  display: block;
  height: 1px;
  border: 0;
  border-top: 1px solid #ccc;
  margin: 1em 0;
  padding: 0;
}
.navbar {
  opacity: 0.9;
  background-image: url("images/footer.png");
  background-position: center;
}
.navbar .logo {
  color: white;
}
.navbar .logo:hover {
  color: white;
  background-color: #337ab7;
}
.navbar .navbar-nav > .refresh-btn a {
  color: white;
}
.navbar .navbar-nav > .refresh-btn a:hover {
  color: white;
  background-color: #4c008a;
}
.navbar .dropdown > .name-dropdown {
  color: white;
}
.navbar .dropdown > .name-dropdown #notification-badge {
  background-color: #4c008a;
}
.navbar .dropdown > .name-dropdown:hover {
  color: white;
  background-color: #4c008a;
}
.logo span {
  margin-left: 5px;
}
.logo .img-logo {
  height: 20px;
  display: inline;
}
.new-data-alert {
  color: white;
  font-size: 12px;
  font-family: 'Sofia Pro';
  background-color: #4c008a;
  border: 1px solid #2e6da4;
  text-align: center;
  position: absolute;
  left: 50%;
  width: 120px;
  margin-left: -60px;
  top: 50px;
  border-radius: 0px 0px 5px 5px;
}
.new-data-alert a {
  color: white;
}
#personal-bar .panel {
  padding-top: 10px;
  padding-bottom: 10px;
}
#personal-bar .profile-pic {
  position: relative;
  width: 100px;
  height: 100px;
  margin-left: auto;
  margin-right: auto;
  margin-top: 10px;
  margin-bottom: 10px;
  overflow: hidden;
  border-radius: 10000px;
}
#personal-bar .profile-pic .upload-profile-pic-btn {
  text-decoration: underline;
  position: absolute;
  top: 40px;
  color: white;
  width: 100px;
  text-align: center;
  display: none;
}
#personal-bar .profile-pic img {
  position: absolute;
  top: -9999px;
  bottom: -9999px;
  left: -9999px;
  right: -9999px;
  margin: auto;
}
#personal-bar .profile-pic:hover {
  cursor: pointer;
}
#personal-bar .profile-pic:hover .upload-profile-pic-btn {
  display: block;
  z-index: 1;
}
#personal-bar .profile-pic:hover img {
  -webkit-filter: brightness(80%);
}
#personal-bar .users-name {
  text-align: center;
  width: 100%;
}
#personal-bar .users-info .users-friends {
  color: gray;
  display: inline-block;
  border-right: 1px solid #ddd;
  width: 49%;
  text-align: right;
  padding: 10px;
}
#personal-bar .users-info .users-status {
  color: gray;
  padding: 8px;
  margin: 0px;
  display: inline-block;
  width: 49%;
}
#personal-bar .users-buttons {
  margin-top: 10px;
  margin-bottom: 10px;
  text-align: center;
}
.picture-btn,
.cancel-picture-btn {
  position: absolute;
  right: 10px;
  top: -4px;
}
.post-picture-btn {
  position: absolute;
  right: 106px;
  top: 0px;
}
.post-picture-btn button {
  border-radius: 0px 4px 4px 0px;
}
.upload-photo {
  display: none;
  margin-top: 10px;
  margin-bottom: 0px;
}
.upload-photo .panel {
  margin-bottom: 0px;
}
.upload-photo .panel button {
  margin-top: 0px;
}
.post-textarea {
  padding-right: 30px;
}
.wordwrap {
  white-space: pre-wrap;
  /* CSS3 */
  white-space: -moz-pre-wrap;
  /* Firefox */
  white-space: -pre-wrap;
  /* Opera <7 */
  white-space: -o-pre-wrap;
  /* Opera 7 */
  word-wrap: break-word;
  /* IE */
}
.post-btn-group {
  padding-top: 10px;
}
.post-btn-group button {
  border: none;
  background: none;
  color: #337ab7;
}
.post-btn-group button:hover {
  text-decoration: underline;
  color: #23527c;
}
.post-toolbar {
  margin-top: 5px;
}
.post-reply blockquote {
  font-size: 14px;
  font-family: 'Sofia Pro';
}
.img-panel img {
  flex-shrink: 0;
  min-width: 100%;
}
.img-panel img {
  display: flex;
  justify-content: center;
  align-items: center;
  vertical-align: middle;
  overflow: hidden;
}
.img-panel img:hover {
  cursor: pointer;
  -webkit-filter: grayscale;
  /*sepia, hue-rotate, invert....*/
  -webkit-filter: brightness(80%);
}
.videoWrapper {
  position: relative;
  padding-bottom: 57%;
  /* 16:9 */
  padding-top: 25px;
  height: 0;
}
.videoWrapper iframe {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
}
.friend-count,
.friends-search {
  width: 100%;
  text-align: right;
  color: #666;
}
.friend-profile {
  height: 100px;
  overflow: hidden;
}
.friend-profile .friend-img {
  position: relative;
  top: 20px;
  left: 10px;
  height: 60px;
  width: 60px;
  display: inline-block;
  overflow: hidden;
  border-radius: 10000px;
}
.friend-profile .friend-img img {
  height: 100%;
  position: absolute;
  top: -9999px;
  bottom: -9999px;
  left: -9999px;
  right: -9999px;
  margin: auto;
}
.friend-profile .friend-info {
  text-align: center;
  width: 170px;
  display: inline-block;
  position: relative;
  top: 10px;
  left: 12px;
}
.friend-profile .friend-info .friend-name {
  font-size: 18px;
  font-family: 'Sofia Pro';
  border-bottom: 1px solid #ddd;
}
.friend-profile .friend-info .friend-btn-group {
  position: relative;
  top: 10px;
}
.footer {
  text-align: center;
  padding: 10px;
}
.footer ul {
  text-align: left;
}
.footer .info {
  text-align: left;
}
.footer address {
  margin-top: 15px;
}
#img-modal > .modal-dialog {
  width: 70%;
}
#img-modal > .modal-dialog img {
  width: 100%;
}
#img-modal > .modal-dialog .img-info {
  left: 30px;
  top: 20px;
  padding-right: 20px;
  position: absolute;
  color: white;
  text-shadow: 0px 0px 3px #000000;
}
#img-modal > .modal-dialog .img-info .img-author {
  font-weight: bold;
  font-family: 'Sofia Pro';
  font-size: 24px;
}
#img-modal > .modal-dialog .img-info .img-comment {
  font-size: 18px;
  font-weight: bold;
  font-family: 'Sofia Pro';
}
[ng\:cloak],
[ng-cloak],
[data-ng-cloak],
[x-ng-cloak],
.ng-cloak,
.x-ng-cloak {
  display: none !important;
}

h3, p, a{
  font-family: 'Sofia Pro';
}
</style>


<!-- <<<<<< CSS ENDS HERE >>>>>> -->


<script>window.console = window.console || function(t) {};</script>

<script>
  if (document.location.search.match(/type=embed/gi)) 
  {
    window.parent.postMessage("resize", "*");
  }
</script>

</head>
<body translate="no" >

<!--Controls how the site will be viewed on mobile devices-->

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<body ng-app="myApp" ng-controller="myCtrl"> <!-- ANGULAR JS SCRIPT STARTS HERE -->


<!--Header content-->
<div id="header" class="container">
  
  <div class="col-md-12">
    <nav class="navbar navbar-default navbar-fixed-top">
      
      <div class="container">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#main-nav-collapse" aria-expanded="false">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand logo">
          <img align="left" class="img img-logo img-responsive" src="images/logo.png" /><span>Social Connect Forum - Bangalore Diaries </span>
        </a>
      </div>

      <!-- Collect the nav links, forms, and other content for toggling -->
      <div class="collapse navbar-collapse" id="main-nav-collapse">
        <ul id="site-nav" class="nav navbar-nav">
        </ul>

        <!--Site Navigation Drop Down-->
        <ul class="nav navbar-nav navbar-right">

          <li class="dropdown">
            <a href="#" class="dropdown-toggle name-dropdown" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
              Menu 
              <span class="caret"></span>
            </a>
            <ul class="dropdown-menu">
                    <li><a href = "index.html" accesskey="1" title="">Home</a></li>
                    <li><a href="Food.html" accesskey="2" title="">Food</a></li>
                    <li><a href="ITHubs.html" accesskey="3" title="">IT Hubs</a></li>
                    <li><a href="#" accesskey="4" title="">Social Connect</a>
                    <li><a href="ExternalDTD.xml" accesskey="5" title="">WeekEnd Getaways</a>
                    <li><a href="About Me.html" accesskey="6" title="">About Me</a></li>
                    <li><a href="Contactme.html" accesskey="7" title="">Contact Me</a></li>
                    <li><a href="payment.html" accesskey="7" title="">Payment</a></li>
            </ul>
          </li>
          <!--User drop down-->

        </ul>
        <!--user nav / navbar left-->

      </div>
      <!-- /.navbar-collapse -->
    </nav>
  </div>
</div>


<!--Main content area-->
<div id="main-content" class="container">
  
  <!--Friend menu-->
  <div id="friends-bar" class="col-md-3 col-md-push-9 hidden-sm hidden-xs" ng-cloak>
    
    <!--Search bar for friends-->
    <div class="row">
      <div class="col-md-12">
        <input ng-model="friendSearchInput.text" class="form-control" placeholder="Find friends..." ng-change="searchUsers()"/>
      </div>
    </div>
    <div class="row">
      <div class="col-md-12">
        
        <div class="friends-list">
          
          <!--Friends list-->
          <div class="friends-only" ng-show="data.friends.length">
            <hr>
            <div class="friend-count hidden">showing {{ data.friendCount }} of {{ data.friendCount }}</div>

            <!--Friend Profile template-->
            <div class="panel panel-default friend-profile" ng-repeat="friend in data.friends" ng-cloak>
              <div class="friend-img hidden-md">
                <img class="img" ng-src="{{ friend.imgURL }}"/>
              </div>
              <div class="friend-info">
                <div class="friend-name">
                  {{ friend.firstName + " " + friend.lastName }}
                </div>
                <div class="friends-friends">
                  {{ friend.friendsInCommon }} Friends in common
                </div>
                <div class="friend-btn-group">
                  <div class="btn-group">
                    <button class="btn btn-primary btn-xs">
                      <span class="glyphicon glyphicon-user"></span>
                      Profile
                    </button>
                    <button class="btn btn-danger btn-xs" ng-click="removeFriend(friend)">
                      <span class="glyphicon glyphicon-minus"></span>
                      Remove
                    </button>
                  </div>
                </div>
              </div>
            </div><!--End of Example-->
          </div>
          <!--End of friends list-->
          
          <!--Show pending friend requests-->
          <div class="pending-friend-requests" ng-show="pendingFriendRequests.length">
            <hr>
            
            <div class="friends-search">
              <span>Pending friend requests</span>
            </div>

             <!--Profile example-->
            <div class="panel panel-default friend-profile" ng-repeat="request in pendingFriendRequests" ng-cloak>
              <div class="friend-img hidden-md">
                <img class="img" ng-src="{{ request.imgURL }}"/>
              </div>
              <div class="friend-info">
                <div class="friend-name">
                  {{ request.firstName + " " + request.lastName }}
                </div>
                <div class="friends-friends">
                  {{ request.friendsInCommon }} Friends in common
                </div>
                <div class="friend-btn-group">
                  <div class="btn-group">
                    <button class="btn btn-primary btn-xs">
                      <span class="glyphicon glyphicon-user"></span>
                      Profile
                    </button>
                    <button class="btn btn-info btn-xs" ng-click="approveFriendRequest(request)">
                      <span class="glyphicon glyphicon-plus"></span>
                      Request Sent
                    </button>
                  </div>
                </div>
              </div>
            </div>
            <!--End of Example-->

          </div>
          <!--End of pending requests-->
          
          
          
          <!--users search results-->
          <div class="search-results" ng-show="friendSearchInput.text.length">
            <hr>
            
            <div class="friends-search">
              <span ng-show=(usersSearchResults.length)>Top search results</span>
              <span ng-show=(!usersSearchResults.length)>No search results</span>
            </div>

             <!--Profile example-->
            <div class="panel panel-default friend-profile" ng-repeat="friend in usersSearchResults" ng-cloak>
              <div class="friend-img hidden-md">
                <img class="img" ng-src="{{ friend.imgURL }}"/>
              </div>
              <div class="friend-info">
                <div class="friend-name">
                  {{ friend.firstName + " " + friend.lastName }}
                </div>
                <div class="friends-friends">
                  {{ friend.friendsInCommon }} Friends in common
                </div>
                <div class="friend-btn-group">
                  <div class="btn-group">
                    <button class="btn btn-primary btn-xs">
                      <span class="glyphicon glyphicon-user"></span>
                      Profile
                    </button>
                    <button class="btn btn-primary btn-xs" ng-click="sendFriendRequest(friend)">
                      <span class="glyphicon glyphicon-plus"></span>
                      Add
                    </button>
                  </div>
                </div>
              </div>
            </div>
            <!--End of Example-->

          </div>
          <!--end of search results-->

          <hr>
          
          <!--sidebar footer-->
          <div class="alert alert-info footer">
            
            <h3>Welcome to the Community</h3>
              
            <img src="images/logo.png" height="25%" width="25%" align="center">
            </p>
            
            <address>
              <strong>Sandhya M</strong><br>
                Bengaluru, Karnataka<br>
                <a href="https://www.behance.net/sandhyam11" class="__cf_email__" data-cfemail="e88689858da89884898b8dc68b8785">See My Profile</a>
            </address>
            
          </div>

          <div class="alert alert-info footer">
            
            <h3><strong>Top Bloggers Are Displayed Here</strong></h3><br>
            <p><strong>My Food Story</strong></p><br>
            <img src="images/2.gif" height="180" width="223"><br>
            <p> SnapShot By Richa Gupta</p>
            <br>
            <p>:::::::::::::::::::::::::::::::</p><br>
            <p>Fashion<strong> Statement </strong></p><br>
            <img src="images/gif1.gif" height="170" width="223"><br>
            <p> SnapShot by Shrey Yadav</p>
            <br><br>
            <p>:::::::::::::::::::::::::::::::</p><br>
            <p> Wanna get your Work Showcased?</p>
            <p>
            


          </div>
          
          <!--end of sidebar footer-->


        </div>
      </div>
    </div>
  </div>
  <!--end of friends menu-->
  
  <!--Personal bar-->
  <div id="personal-bar" class="col-md-3 col-md-pull-3 hidden-sm hidden-xs">
    <div class="panel panel-default" ng-cloak>
      <div class="profile-pic" ng-click="newProfileImg()">
        <img id="profile-img" ng-src="{{ data.user.imgURL }}" height="100%"/>
        <div class="upload-profile-pic-btn">
          Upload new
        </div>
        <input type="file" id="profileImgInput" class="hidden">
      </div>
      <div class="users-name">
        <h4>{{ data.user.firstName + " " + data.user.lastName }}</h3>
      </div>
      <div class="users-info">
        <div class="users-friends">
          Friends<br>
          {{ data.friends.length }}
        </div>
        <div class="users-status">
          Status<br>
          {{ data.status }}
        </div>
      </div>
      <div class="users-buttons">
        <!--Button group for the lg size-->
        <div class="btn-group hidden-md hidden-sm hidden-xs" role="group">
          <button class="btn btn-primary btn-xs">
            <span class="glyphicon glyphicon-user" aria-hidden="true" ></span>
            Profile
          </button>
          <button class="btn btn-primary btn-xs" data-toggle="modal" data-target="#settings-modal" ng-click="initTempData()">
            <span class="glyphicon glyphicon-cog" aria-hidden="true"></span>
            Settings
          </button>
          <button class="btn btn-primary btn-xs" data-toggle="modal" data-target="#feedback-modal">
            <span class="glyphicon glyphicon-bullhorn" aria-hidden="true"></span>
            Feedback
          </button>
        </div>
        <!--Button group for the xs-md size-->
        <div class="btn-group-vertical hidden-lg" role="group">
          <button class="btn-block btn btn-primary">
            <span class="glyphicon glyphicon-user" aria-hidden="true"></span>
            Profile
          </button>
          <button class="btn-block btn btn-primary" data-toggle="modal" data-target="#settings-modal"><br>
            <span class="glyphicon glyphicon-cog" aria-hidden="true"></span>
            Settings
          </button>
          <button class="btn-block btn btn-primary" data-toggle="modal" data-target="#feedback-modal">
            <span class="glyphicon glyphicon-bullhorn" aria-hidden="true"></span>
            Feedback
          </button>
        </div>
      </div>
      
    </div>
    
    <div class="alert alert-success" role="alert">Thank you for joining <u><strong>Social Connect Forum</strong><br><br></u>We hope you find <u><strong>Creative Side</strong></u><br><br>I wanted it to be an easy to use, no-nonsense social connection forum. <br><br>If you have any comments, questions or just <strong>general feedback</strong>, please click the button above and let us know.</div>

    <div class="alert alert-success" role="alert">You can check <strong>Latest Articles on Bangalore Trends Here</strong>
    <br><br>
    <img src="images/content.jpg" height="180" width="200" align="center"><br><br>
    <p><a>1. Bangalore International Conference</a></p>
    <p><a>2. Metro Updates </a></p>
    <p><a>3. A Quick Guide To Blog Writing</a></p>


    </div>
  
  </div>
  <!--end of personal bar-->

  <!--main data stream-->
  <div id="main-content" class="col-md-6 col-md-pull-3">

    <!--New post row-->
    <div id="post-row" class="row">
      <div class="col-md-12">
        <form>
            <textarea class="form-control post-textarea" rows="1" style="resize:none" placeholder="Post a comment, share a link, or upload a photo..." ng-keyup="createNewPostOnEnter($event)" ng-model="newPost.text"></textarea>
        </form>     
      </div>
    </div>
    <!--post a comment field-->

    <hr>

    <div id="main feed" class="row">
      <div class="col-md-12">
        <div id="stream-well" class="">
          
          <!--Comment example-->
          <div class="panel panel-default" ng-repeat="post in stream | orderBy:'timestamp':'reverse' " id="post{{post.id}}" ng-cloak>
            <div class="panel-body img-panel">
              <button aria-label="Close" class="close" data-dismiss="modal" type="button" ng-show="post.user.id==data.user.id" ng-click="deletePost(post)">
                <span aria-hidden="true">×</span>
              </button>
              <blockquote>
                <p class="wordwrap" ng-bind-html="post.textBody"></p>
                <footer>{{ post.user.firstName + " " + post.user.lastName }} {{ post.timestamp | date : "h:mm a MMM dd',' yyyy" }} </footer>
              </blockquote>
              <img ng-src="{{ post.imgURL }}" ng-show="{{ post.imgURL }}" class="img-responsive" alt="Responsive image" data-toggle="modal" data-target="#img-modal" ng-click="openImgModal(post)">
              <div class="videoWrapper" ng-show="{{ post.youtubeURL }}">
                <iframe width="560" height="315" ng-src="{{ post.youtubeURL }}" frameborder="0" allowfullscreen></iframe>
              </div>
              <div class="post-btn-group">
                <button id="{{ post.id }}" class="btn-upvote btn-md" ng-click="upvote(post)">
                  <span class="glyphicon glyphicon-sunglasses" aria-hidden="true"></span>
                  <span class="sweet-text" ng-if="!isUpvoted(post)">Sweet</span>
                  <span class="sweet-text" ng-if="isUpvoted(post)">Unsweet</span>
                    <span class="badge sweet-badge">{{ post.sweet.length }}</span>
                </button>
                <button class="btn-comment btn-md" ng-click="openComments(post)">
                  <span class="glyphicon glyphicon-comment" aria-hidden="true"></span>
                  Comments <span class="badge">{{ post.comments.length }}</span>
                </button>
              </div>
              <div class="panel-footer post-reply comments" style="display: none;">
                <div class="comment" ng-repeat="comment in post.comments">
                  <blockquote>
                    <p class="wordwrap">{{ comment.textBody }}</p>
                    <footer>{{ comment.user.firstName + " " + comment.user.lastName }}, {{ comment.timestamp | date : "h:mm a MMM dd',' yyyy" }} </footer>
                  </blockquote>
                </div>
                <form>
                  <textarea class="form-control reply-textarea" rows="1" style="resize:none" placeholder="Post a reply..." ng-model="post.newReply.text" ng-keyup="createNewReply($event, post)"></textarea>
                </form>
              </div>
            </div>
          </div>
          <!--repeat post panel-->

        </div>
      </div>
    </div>
    <!--main feed-->
  </div>
  <!--end of main content stream-->
  
</div>

<!--Image modal-->
<div class="modal fade" id="img-modal" tabindex="-1" role="dialog" aria-labelledby="im-modal-label">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-body">
        <div class="img-info">
          <div class="img-author">{{ modalImg.user.firstName + " " + modalImg.user.lastName }}, <small>{{ modalImg.timestamp | date : "h:mm a MMM dd',' yyyy" }}</small></div>
          <div class="img-comment"><p>{{ modalImg.textBody }}</p></div>
        </div>
        <img class="img img-responsive" ng-src="{{ modalImg.imgURL }}" />
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div>
<!--End of image model-->


<!--Settings Modal-->
<div aria-hidden="true" aria-labelledby="myModalLabel" class="modal fade" id="settings-modal" role="dialog" tabindex="-1" style="display: none;">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title">Settings</h4>
      </div>
      <div class="modal-body">
        <form>
          <div class="form-group">
            <label>
              First Name
              <input type="text" ng-model="tempData.user.firstName">
            </label>
          </div>
          <div class="form-group">
            <label>
              Last Name
              <input type="text" ng-model="tempData.user.lastName">
            </label>
          </div>
          <div class="form-group">
            <label>
              <input type="checkbox" ng-model="tempData.settings.receiveEmailsNotifications">&nbsp;Receive email notifications
            </label>
          </div>
          <div class="form-group">
            <label>
              <input type="checkbox" ng-model="tempData.settings.recieveEmailNews">&nbsp;Receive emails news and updates
            </label>
          </div>
          <div class="form-group">
            <label>Change your Password:</label><br>
              <input class="form-control" type="password" placeholder="Change password..." /><br>
              <input class="form-control" type="password" placeholder="Confirm password..." />
          </div>
            <div class="form-group">
              <label>Update your Email:</label><br>
              <input class="form-control" type="text" placeholder="New Email..."><br>
              <input class="form-control" type="text" placeholder="Confirm Email...">
          </div>
        </form>
    </div>
      <div class="modal-footer">
        <button class="btn btn-default" data-dismiss="modal" type="button" ng-click="cancelSettings()">Cancel</button>
        <button class="btn btn-primary" type="button" data-dismiss="modal" ng-click="setSettings()" >Save Changes</button>
      </div>
    </div>
  </div>
</div>
<!--End of settings modal-->

<!--Feedback Modal-->
<div aria-hidden="true" aria-labelledby="myModalLabel" class="modal fade" id="feedback-modal" role="dialog" tabindex="-1">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title">Provide Feedback</h4>
      </div>
      <div class="modal-body">
        <form>
          <div class="form-group">
            <input class="form-control" id="subject" placeholder="Subject" type="text" data-ng-model="feedback.subject">
          </div>
          <div class="form-group">
            <textarea class="form-control" id="body" placeholder="Please provide Clear and Concise Comments to help us improve SocialConnect Blog" rows="3" data-ng-model="feedback.body"></textarea>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button class="btn btn-default" data-dismiss="modal" type="button">Cancel</button>
        <button class="btn btn-primary" type="button" data-dismiss="modal" data-ng-click="sendFeedback()">Submit Feedback</button>
      </div>
    </div>
  </div>
</div>
<!--end of feedback modal-->
  
<script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script></body>
<script src="https://static.codepen.io/assets/common/stopExecutionOnTimeout-157cd5b220a5c80d4ff8e0e70ac069bffd87a61252088146915e8726e5d9f147.js"></script>

<script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script>
<script src='https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js'></script>
<script src='https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.11.2/jquery-ui.min.js'></script>
<script src='https://s3-us-west-2.amazonaws.com/s.cdpn.io/64754/autosize.min.js'></script>
<script src='https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.3.14/angular.min.js'></script>
<script src='https://cdnjs.cloudflare.com/ajax/libs/angular-file-upload/1.1.6/angular-file-upload.min.js'></script>
<script src='https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.5.0-beta.1/angular-sanitize.min.js'></script>
  
<script id="rendered-js" >
var app = angular.module('myApp', ['ngSanitize']);
app.config(function ($sceDelegateProvider) {
  $sceDelegateProvider.resourceUrlWhitelist([
  'self',
  '*://www.youtube.com/**']);

});
app.controller('myCtrl', function ($scope) {

  //Data model for the stream
  $scope.stream = [
  //Start of image example
  {
    id: 0,
    textBody: "Develop a Successful Tech Startup Entrepreneurship Business Today!",
    user: {
      firstName: "Sandhya",
      lastName: "M" },

    timestamp: "28th September, 2020",
    imgURL: "D:/MSC/3 sem/Web Tech Lab/BGR Diaries/images/gif2.gif",
    sweet: [{
      id: 2 },
    {
      id: 1,
      firstName: "Sandhya",
      lastName: "M" }],

    comments: [{
      textBody: "Looks like that Material Design and A Pinch of Windows Fluent Design System",
      user: {
        firstName: "Sandhya",
        lastName: "M" },

      timestamp: "11:21am September 20th 2020" },
    {
      textBody: "Awesome Work, Looks really awesome. Have all my heart! <3",
      user: {
        firstName: "Andrew",
        lastName: "Sheffield" },

      timestamp: "11:25am September 24th 2020" }] },

  //Start of Comment only example
  {
    id: 1,
    textBody: "Metro lines to IT hubs on a shaky track",
    user: {
      firstName: "Sandhya",
      lastName: "M" },

    timestamp: "19:25pm 28th September, 2020",
    imgURL: "D:/MSC/3 sem/Web Tech Lab/BGR Diaries/images/metro.gif",
    sweet: [{
      id: 1 },
    {
      id: 2 }],

    comments: [{
      textBody: "Looks like iOS taking some Widgets Lessons from Android",
      user: {
        firstName: "Sandhya",
        lastName: "M" },

      timestamp: "11:21am September 20th 2020" },
    {
      textBody: "Awesome Work, Looks really awesome. Have all my heart! <3",
      user: {
        firstName: "Jessica",
        lastName: "Alba" },

      timestamp: "11:25am September 20th 2020" }] },

  //Start of youtube video post
  {
    id: 2,
    textBody: " How to Write A Blog Post for Beginners? - 10 Quick Tips",
    user: {
      firstName: "Sandhya",
      lastName: "M" },

    timestamp: 1443554687980,
    youtubeURL: "https://www.youtube.com/embed/kGI1SwcWoUs",
    sweet: [{
      id: 2 }],

    comments: [{
      textBody: "Just Love this, makes everything so organized and easy.",
      user: {
        firstName: "Sandhya",
        lastName: "M" },

      timestamp: "11:21am July 20th 2020" },
    {
      textBody: "Awesome. Love to make best blog and creative is just so easy as well.",
      user: {
        firstName: "Keanu",
        lastName: "Reeves" },

      timestamp: "11:25am July 20th 2020" }] }];




  //Data model for the user data
  $scope.data = {
    user: {
      id: 1,
      firstName: "Sandhya",
      lastName: "M",
      imgURL: "images/pic.png" },

    friends: [],
    status: "Happy Feet :)",
    settings: {
      receiveEmailsNotifications: true,
      recieveEmailNews: true } };



  //Data model for new post
  $scope.newPost = {};

  //Data model for posting new image
  $scope.newimg = {};

  //Data model for selected image for modal
  $scope.modalImg = {};

  //Holds the data for temporary settings
  $scope.tempData = {};

  //searchable users
  $scope.usersSearchResults = [];

  $scope.pendingFriendRequests = [];

  /*************************   Start of Angular Functions      *************************

  /*** Angular JS Components Used:

      ng-cloak - prevents the doc from showing unfinished code
      ng-app - root element
      ng-controller - controlling the other objects
      ng-model - details of user in settings
      ng-change - searching users
      ng-show - displaying of friends
      ng-repeat - friends/posts
      ng-src - img URL
      ng-click - friendrequest/remove
      ng-keyup - new post/new comment
      ng-bind - users details in post
      ng-if - sweet/unsweet
  */

  //detect if enter is pressed and create post
  $scope.createNewPostOnEnter = function (event) {
    if (event.which == 13 || event.keyCode == 13) {
      createNewPost();
    }
  };

  //create a new post
  var createNewPost = function () {
    $('.upload-photo').hide();
    var postText = "";
    if ($scope.newPost.text) postText = $scope.formatLinks($scope.newPost.text);

    var newPost = {
      id: $scope.stream.length,
      textBody: postText,
      user: $scope.data.user,
      timestamp: Date.now(),
      sweet: [],
      comments: [] };


    if ($scope.newimg.src) {
      newPost.imgURL = $scope.newimg.src;
    }

    $scope.stream.push(newPost);
    console.log($scope.stream);

    $scope.newPost.text = "";
    var ta = document.querySelector('textarea');
    autosize(ta);
    ta.value = "";
    // Dispatch a 'autosize:update' event to trigger a resize:
    var evt = document.createEvent('Event');
    evt.initEvent('autosize:update', true, false);
    ta.dispatchEvent(evt);
    $scope.newimg.src = "";
    $("#imginputpreview").attr('src', "");

    return false;
  };

  //format string with URL's
  $scope.formatLinks = function (string) {
    var stringArray = string.split(" ");
    var i;
    for (i = 0; i < stringArray.length; i++) {if (window.CP.shouldStopExecution(0)) break;
      if (stringArray[i].indexOf("http") == 0 || stringArray[i].indexOf("https") == 0 || stringArray[i].indexOf("HTTP") == 0 || stringArray[i].indexOf("HTTPS") == 0) {
        var newString = "<a href='" + stringArray[i] + "' target='_blank'>" + stringArray[i] + "</a>";
        stringArray[i] = newString;
      }
    }window.CP.exitedLoop(0);

    return stringArray.join(" ");

  };

  //Create new REPLY
  $scope.createNewReply = function (event, post) {
    if (event.which == 13 || event.keyCode == 13) {
      var newReply = {
        id: post.comments.length,
        textBody: post.newReply.text,
        user: $scope.data.user,
        timestamp: Date.now() };

      post.comments.push(newReply);

      var ta = $("#post" + post.id + " textarea");
      ta.val("");
      autosize.update(ta);

      return false;
    }
  };

  //Searches through post for img URL to post
  //**NEEDS DEBUG**
  $scope.getImgURL = function (string) {
    string = string.toLowerCase();

    var imgExtArray = ["jpg", "bmp", "jpeg", "gif", "png"];
    var beginLinkIndex = string.indexOf("http");
    var endLinkIndex = 0;

    for (i = 0; i < imgExtArray.length; i++) {if (window.CP.shouldStopExecution(1)) break;
      var ext = imgExtArray[i];
      var extIndex = string.indexOf(ext);
      if (extIndex > 0) {
        endLinkIndex = extIndex + ext.length;
        break;
      }
    }window.CP.exitedLoop(1);

    if (beginLinkIndex < endLinkIndex) {
      return string.substring(beginLinkIndex, endLinkIndex);
    }

    return "";
  };

  //Searches through post of youtube URL
  $scope.getYoutubeURL = function (string) {
    //https://www.youtube.com/embed/IdneKLhsWOQ
    //https://www.youtube.com/watch?v=IdneKLhsWOQ
    if (string.indexOf("youtube.com") >= 0) {
      var stringArray = string.split("watch?v=");
      return "https://www.youtube.com/embed/" + stringArray[1];
    } else {
      return "";
    }
  };

  //Toggle upvote on post
  $scope.upvote = function (post) {
    var index = $scope.indexOfSweet(post);
    if (index < 0) {
      post.sweet.push($scope.data.user);
    } else {
      post.sweet.splice(index, 1);
    }
  };

  /**
       Takes a post
       searches the sweets for the user
       if user exists it returns the index
       else return -1
     */
  $scope.indexOfSweet = function (post) {
    for (i = 0; i < post.sweet.length; i++) {if (window.CP.shouldStopExecution(2)) break;
      if (post.sweet[i].id == $scope.data.user.id) return i;
    }window.CP.exitedLoop(2);
    return -1;
  };

  //Boolean function to check if post is upvoted
  $scope.isUpvoted = function (post) {
    for (i = 0; i < post.sweet.length; i++) {if (window.CP.shouldStopExecution(3)) break;
      if (post.sweet[i].id == $scope.data.user.id) return true;
    }window.CP.exitedLoop(3);
    return false;
  };

  //Toggle the comments open for post
  $scope.openComments = function (post) {
    $scope.setAutoResize(post);
    $("#post" + post.id + " .comments").toggle('ease');
    $("#post" + post.id + " .comments").find('textarea').focus();
  };

  $scope.setAutoResize = function (post) {
    var ta = $("#post" + post.id + " textarea");
    ta.val("");
    autosize(ta);
  };

  $scope.openImgModal = function (post) {
    $scope.modalImg = post;
  };

  //Settings Functions
  $scope.setSettings = function () {
    $scope.data = angular.copy($scope.tempData);
  };
  $scope.cancelSettings = function () {
    $scope.tempData = angular.copy($scope.data);
  };

  //Canceling an Image Post
  $scope.cancelImgPost = function () {
    $('.upload-photo').hide();
    $scope.newimg.src = "";
    $("#imginputpreview").attr('src', "");
  };

  //delete a post
  $scope.deletePost = function (post) {
    for (i = 0; i < $scope.stream.length; i++) {if (window.CP.shouldStopExecution(4)) break;
      if (post.id == $scope.stream[i].id) {
        $scope.stream.splice(i, 1);
      }
    }window.CP.exitedLoop(4);
  };

  /**
       This activate the file input when the picture icon is clicked
     */

  //Engage the open file input
  $(".picture-btn").on('click', function () {
    $("#imginput").click();
    $(".picture-btn").toggle();
    $(".post-picture-btn").toggle();
  });

  $(".post-picture-btn").on('click', function () {
    $(".picture-btn").toggle();
    $(".post-picture-btn").toggle();
    createNewPost();
  });

  function readURL(input) {
    if (input.files && input.files[0]) {
      var reader = new FileReader();

      reader.onload = function (e) {
        $('.upload-photo').show();
        $scope.newimg.src = e.target.result;
        $("#imginputpreview").attr('src', e.target.result);
      };

      reader.readAsDataURL(input.files[0]);
    }
  }

  $("#imginput").change(function () {
    readURL(this);
    $('.post-textarea').focus();
  });

  //Upload new profile picture
  $scope.newProfileImg = function () {
    $("#profileImgInput").click();
  };
  $("#profileImgInput").change(function () {
    var input = this;
    if (input.files && input.files[0]) {
      var reader = new FileReader();

      reader.onload = function (e) {
        $scope.data.user.imgURL = e.target.result;
        $("#profile-img").attr('src', e.target.result);
      };

      reader.readAsDataURL(input.files[0]);
    }
  });

  //initialize temp data for settings on open
  $scope.initTempData = function () {
    $scope.tempData = angular.copy($scope.data);
  };

  //Search for friends
  $scope.searchUsers = function () {
    $scope.usersSearchResults = [];

    var inputText = $scope.friendSearchInput.text.toLowerCase();
    var inputTextArray = inputText.split(" ");
    var inputTextFirst = inputTextArray[0];
    var inputTextSecond = inputTextArray[1];

    var i;
    for (i = 0; i < worldUserList.length; i++) {if (window.CP.shouldStopExecution(5)) break;
      var friend = worldUserList[i];
      var firstName = friend.firstName.toLowerCase();
      var lastName = friend.lastName.toLowerCase();
      var iOfFirst = firstName.indexOf(inputTextFirst);
      var iOfLast = lastName.indexOf(inputTextFirst);
      var iOfLastSecond = lastName.indexOf(inputTextSecond);
      var areFriends = $scope.userIsFriend(worldUserList[i]);
      if (
      iOfFirst == 0 && !inputTextSecond && !areFriends || //checks first name is no last is present
      iOfLast == 0 && !inputTextSecond && !areFriends //checks last name against last name
      || iOfFirst == 0 && iOfLastSecond == 0 && !areFriends //checks first and last
      ) {
          $scope.usersSearchResults.push(worldUserList[i]);
        }
    }window.CP.exitedLoop(5);
  };

  $scope.userIsFriend = function (user) {
    var i;
    for (i = 0; i < $scope.pendingFriendRequests.length; i++) {if (window.CP.shouldStopExecution(6)) break;
      if (user.id == $scope.pendingFriendRequests[i].id) return true;
    }window.CP.exitedLoop(6);
    for (i = 0; i < $scope.data.friends.length; i++) {if (window.CP.shouldStopExecution(7)) break;
      if (user.id == $scope.data.friends[i].id) return true;
    }window.CP.exitedLoop(7);
    return false;
  };

  $scope.sendFriendRequest = function (friend) {
    $scope.pendingFriendRequests.push(friend);
    $scope.usersSearchResults = [];
    $scope.friendSearchInput = "";
  };

  $scope.approveFriendRequest = function (friend) {
    var indexOfFriend = $scope.pendingFriendRequests.indexOf(friend);
    $scope.pendingFriendRequests.splice(indexOfFriend, 1);
    $scope.data.friends.push(friend);
  };

  $scope.removeFriend = function (friend) {
    var i;
    for (i = 0; i < $scope.data.friends.length; i++) {if (window.CP.shouldStopExecution(8)) break;
      if (friend.id == $scope.data.friends[i].id) {
        $scope.data.friends.splice(i, 1);
      }
    }window.CP.exitedLoop(8);
  };

});


autosize($('textarea'));


$(document).ready(function() {
                              var imgContainer = $("profile-pic");
                              var img = getProfileImage("C:/Users/Sandhya/Image (48).png");
                              loadImg(imgContainer, img);
                            });

function getProfileImage(imgSrc) {
  var img = new Image();
  img.src = imgSrc;
  img.onload = function () {
    if (img.width <= img.height) img.style.width = '100%';else
    img.style.height = '100%';
  };
  return img;
}

function loadImg(imgContainer, img) {
  imgContainer.append(img);
}

/**
    Prevent a new line when enter is pressed
  */
$("textarea").keydown(function (e) {
  // Enter was pressed without shift key
  if (e.keyCode == 13 && !e.shiftKey) {
    // prevent default behavior
    e.preventDefault();
  }
});

//$('.post-textarea').focus();

var worldUserList = [{
  id: 0,
  firstName: "Jessica",
  lastName: "Alba",
  friendsInCommon: 12,
  imgURL: "images/curly.jpeg" },
{
  id: 1,
  firstName: "Aaron",
  lastName: "Finch",
  friendsInCommon: 4,
  imgURL: "images/boy.png" },
{
  id: 2,
  firstName: "Keanu",
  lastName: "Reeves",
  friendsInCommon: 7,
  imgURL: "images/curly.jpeg" },
{
  id: 3,
  firstName: "Gary",
  lastName: "Busey",
  friendsInCommon: 2,
  imgURL: "images/boy.png" }];
</script>
</body>
</html>
 
